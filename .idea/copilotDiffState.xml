<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/com/example/_207103_project/DatabaseManager.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/example/_207103_project/DatabaseManager.java" />
              <option name="originalContent" value="package com.example._207103_project;&#10;&#10;import java.sql.*;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;public class DatabaseManager {&#10;    private static final String DB_URL = &quot;jdbc:sqlite:cv_database.db&quot;;&#10;    private static DatabaseManager instance;&#10;&#10;    private DatabaseManager() {&#10;        initializeDatabase();&#10;    }&#10;&#10;    public static DatabaseManager getInstance() {&#10;        if (instance == null) {&#10;            instance = new DatabaseManager();&#10;        }&#10;        return instance;&#10;    }&#10;&#10;    private void initializeDatabase() {&#10;        try (Connection conn = DriverManager.getConnection(DB_URL);&#10;             Statement stmt = conn.createStatement()) {&#10;            &#10;            // Enable foreign keys for CASCADE to work&#10;            stmt.execute(&quot;PRAGMA foreign_keys = ON&quot;);&#10;            &#10;            String createCVTable = &quot;&quot;&quot;&#10;                CREATE TABLE IF NOT EXISTS cv (&#10;                    id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                    full_name TEXT NOT NULL,&#10;                    email TEXT,&#10;                    phone TEXT,&#10;                    address TEXT,&#10;                    photo_path TEXT,&#10;                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP&#10;                )&#10;                &quot;&quot;&quot;;&#10;            stmt.execute(createCVTable);&#10;&#10;            String createEducationTable = &quot;&quot;&quot;&#10;                CREATE TABLE IF NOT EXISTS education (&#10;                    id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                    cv_id INTEGER NOT NULL,&#10;                    entry TEXT NOT NULL,&#10;                    FOREIGN KEY (cv_id) REFERENCES cv(id) ON DELETE CASCADE&#10;                )&#10;                &quot;&quot;&quot;;&#10;            stmt.execute(createEducationTable);&#10;&#10;            String createSkillsTable = &quot;&quot;&quot;&#10;                CREATE TABLE IF NOT EXISTS skills (&#10;                    id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                    cv_id INTEGER NOT NULL,&#10;                    skill TEXT NOT NULL,&#10;                    FOREIGN KEY (cv_id) REFERENCES cv(id) ON DELETE CASCADE&#10;                )&#10;                &quot;&quot;&quot;;&#10;            stmt.execute(createSkillsTable);&#10;&#10;            String createExperienceTable = &quot;&quot;&quot;&#10;                CREATE TABLE IF NOT EXISTS experience (&#10;                    id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                    cv_id INTEGER NOT NULL,&#10;                    entry TEXT NOT NULL,&#10;                    FOREIGN KEY (cv_id) REFERENCES cv(id) ON DELETE CASCADE&#10;                )&#10;                &quot;&quot;&quot;;&#10;            stmt.execute(createExperienceTable);&#10;&#10;            String createProjectsTable = &quot;&quot;&quot;&#10;                CREATE TABLE IF NOT EXISTS projects (&#10;                    id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                    cv_id INTEGER NOT NULL,&#10;                    project TEXT NOT NULL,&#10;                    FOREIGN KEY (cv_id) REFERENCES cv(id) ON DELETE CASCADE&#10;                )&#10;                &quot;&quot;&quot;;&#10;            stmt.execute(createProjectsTable);&#10;&#10;        } catch (SQLException e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    public int saveCV(CVModel cv) {&#10;        String insertCV = &quot;INSERT INTO cv (full_name, email, phone, address, photo_path) VALUES (?, ?, ?, ?, ?)&quot;;&#10;        &#10;        try (Connection conn = DriverManager.getConnection(DB_URL)) {&#10;            conn.setAutoCommit(false);&#10;            &#10;            try (PreparedStatement pstmt = conn.prepareStatement(insertCV, Statement.RETURN_GENERATED_KEYS)) {&#10;                pstmt.setString(1, cv.getFullName());&#10;                pstmt.setString(2, cv.getEmail());&#10;                pstmt.setString(3, cv.getPhone());&#10;                pstmt.setString(4, cv.getAddress());&#10;                pstmt.setString(5, cv.getPhotoPath());&#10;                pstmt.executeUpdate();&#10;&#10;                ResultSet rs = pstmt.getGeneratedKeys();&#10;                if (rs.next()) {&#10;                    int cvId = rs.getInt(1);&#10;                    cv.setId(cvId);&#10;                    &#10;                    // Save education entries&#10;                    saveListEntries(conn, cvId, cv.getEducation(), &quot;education&quot;, &quot;entry&quot;);&#10;                    &#10;                    // Save skills&#10;                    saveListEntries(conn, cvId, cv.getSkills(), &quot;skills&quot;, &quot;skill&quot;);&#10;                    &#10;                    // Save experience entries&#10;                    saveListEntries(conn, cvId, cv.getExperience(), &quot;experience&quot;, &quot;entry&quot;);&#10;                    &#10;                    // Save projects&#10;                    saveListEntries(conn, cvId, cv.getProjects(), &quot;projects&quot;, &quot;project&quot;);&#10;                    &#10;                    conn.commit();&#10;                    return cvId;&#10;                }&#10;            } catch (SQLException e) {&#10;                conn.rollback();&#10;                throw e;&#10;            }&#10;        } catch (SQLException e) {&#10;            e.printStackTrace();&#10;        }&#10;        return -1;&#10;    }&#10;&#10;    private void saveListEntries(int cvId, List&lt;String&gt; entries, String tableName, String columnName) throws SQLException {&#10;        if (entries == null || entries.isEmpty()) return;&#10;        &#10;        String sql = &quot;INSERT INTO &quot; + tableName + &quot; (cv_id, &quot; + columnName + &quot;) VALUES (?, ?)&quot;;&#10;        try (Connection conn = DriverManager.getConnection(DB_URL);&#10;             PreparedStatement pstmt = conn.prepareStatement(sql)) {&#10;&#10;            for (String entry : entries) {&#10;                if (entry != null &amp;&amp; !entry.isBlank()) {&#10;                    pstmt.setInt(1, cvId);&#10;                    pstmt.setString(2, entry);&#10;                    pstmt.executeUpdate();&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    public List&lt;CVModel&gt; getAllCVs() {&#10;        List&lt;CVModel&gt; cvList = new ArrayList&lt;&gt;();&#10;        String query = &quot;SELECT id, full_name, email, phone, address, photo_path FROM cv ORDER BY created_at DESC&quot;;&#10;        &#10;        try (Connection conn = DriverManager.getConnection(DB_URL);&#10;             Statement stmt = conn.createStatement();&#10;             ResultSet rs = stmt.executeQuery(query)) {&#10;            &#10;            while (rs.next()) {&#10;                CVModel cv = new CVModel();&#10;                cv.setId(rs.getInt(&quot;id&quot;));&#10;                cv.setFullName(rs.getString(&quot;full_name&quot;));&#10;                cv.setEmail(rs.getString(&quot;email&quot;));&#10;                cv.setPhone(rs.getString(&quot;phone&quot;));&#10;                cv.setAddress(rs.getString(&quot;address&quot;));&#10;                cv.setPhotoPath(rs.getString(&quot;photo_path&quot;));&#10;                cvList.add(cv);&#10;            }&#10;        } catch (SQLException e) {&#10;            e.printStackTrace();&#10;        }&#10;        &#10;        return cvList;&#10;    }&#10;&#10;    public CVModel getCVById(int id) {&#10;        String query = &quot;SELECT id, full_name, email, phone, address, photo_path FROM cv WHERE id = ?&quot;;&#10;        &#10;        try (Connection conn = DriverManager.getConnection(DB_URL);&#10;             PreparedStatement pstmt = conn.prepareStatement(query)) {&#10;            &#10;            pstmt.setInt(1, id);&#10;            ResultSet rs = pstmt.executeQuery();&#10;            &#10;            if (rs.next()) {&#10;                CVModel cv = new CVModel();&#10;                cv.setId(rs.getInt(&quot;id&quot;));&#10;                cv.setFullName(rs.getString(&quot;full_name&quot;));&#10;                cv.setEmail(rs.getString(&quot;email&quot;));&#10;                cv.setPhone(rs.getString(&quot;phone&quot;));&#10;                cv.setAddress(rs.getString(&quot;address&quot;));&#10;                cv.setPhotoPath(rs.getString(&quot;photo_path&quot;));&#10;                &#10;                // Load education&#10;                cv.getEducation().addAll(loadListEntries(id, &quot;education&quot;, &quot;entry&quot;));&#10;                &#10;                // Load skills&#10;                cv.getSkills().addAll(loadListEntries(id, &quot;skills&quot;, &quot;skill&quot;));&#10;                &#10;                // Load experience&#10;                cv.getExperience().addAll(loadListEntries(id, &quot;experience&quot;, &quot;entry&quot;));&#10;                &#10;                // Load projects&#10;                cv.getProjects().addAll(loadListEntries(id, &quot;projects&quot;, &quot;project&quot;));&#10;                &#10;                return cv;&#10;            }&#10;        } catch (SQLException e) {&#10;            e.printStackTrace();&#10;        }&#10;        &#10;        return null;&#10;    }&#10;&#10;    private List&lt;String&gt; loadListEntries(int cvId, String tableName, String columnName) throws SQLException {&#10;        List&lt;String&gt; entries = new ArrayList&lt;&gt;();&#10;        String query = &quot;SELECT &quot; + columnName + &quot; FROM &quot; + tableName + &quot; WHERE cv_id = ?&quot;;&#10;        &#10;        try (Connection conn = DriverManager.getConnection(DB_URL);&#10;             PreparedStatement pstmt = conn.prepareStatement(query)) {&#10;            &#10;            pstmt.setInt(1, cvId);&#10;            ResultSet rs = pstmt.executeQuery();&#10;            &#10;            while (rs.next()) {&#10;                entries.add(rs.getString(columnName));&#10;            }&#10;        }&#10;        &#10;        return entries;&#10;    }&#10;&#10;    public void deleteCV(int id) {&#10;        String deleteCV = &quot;DELETE FROM cv WHERE id = ?&quot;;&#10;        String deleteEducation = &quot;DELETE FROM education WHERE cv_id = ?&quot;;&#10;        String deleteSkills = &quot;DELETE FROM skills WHERE cv_id = ?&quot;;&#10;        String deleteExperience = &quot;DELETE FROM experience WHERE cv_id = ?&quot;;&#10;        String deleteProjects = &quot;DELETE FROM projects WHERE cv_id = ?&quot;;&#10;        &#10;        try (Connection conn = DriverManager.getConnection(DB_URL)) {&#10;            conn.setAutoCommit(false);&#10;            &#10;            try (PreparedStatement pstmt1 = conn.prepareStatement(deleteEducation);&#10;                 PreparedStatement pstmt2 = conn.prepareStatement(deleteSkills);&#10;                 PreparedStatement pstmt3 = conn.prepareStatement(deleteExperience);&#10;                 PreparedStatement pstmt4 = conn.prepareStatement(deleteProjects);&#10;                 PreparedStatement pstmt5 = conn.prepareStatement(deleteCV)) {&#10;                &#10;                pstmt1.setInt(1, id);&#10;                pstmt1.executeUpdate();&#10;                &#10;                pstmt2.setInt(1, id);&#10;                pstmt2.executeUpdate();&#10;                &#10;                pstmt3.setInt(1, id);&#10;                pstmt3.executeUpdate();&#10;                &#10;                pstmt4.setInt(1, id);&#10;                pstmt4.executeUpdate();&#10;                &#10;                pstmt5.setInt(1, id);&#10;                pstmt5.executeUpdate();&#10;                &#10;                conn.commit();&#10;            } catch (SQLException e) {&#10;                conn.rollback();&#10;                throw e;&#10;            }&#10;        } catch (SQLException e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example._207103_project;&#10;&#10;import java.sql.*;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;public class DatabaseManager {&#10;    private static final String DB_URL = &quot;jdbc:sqlite:cv_database.db&quot;;&#10;    private static DatabaseManager instance;&#10;&#10;    private DatabaseManager() {&#10;        initializeDatabase();&#10;    }&#10;&#10;    public static DatabaseManager getInstance() {&#10;        if (instance == null) {&#10;            instance = new DatabaseManager();&#10;        }&#10;        return instance;&#10;    }&#10;&#10;    private void initializeDatabase() {&#10;        try (Connection conn = DriverManager.getConnection(DB_URL);&#10;             Statement stmt = conn.createStatement()) {&#10;            &#10;            // Enable foreign keys for CASCADE to work&#10;            stmt.execute(&quot;PRAGMA foreign_keys = ON&quot;);&#10;            &#10;            String createCVTable = &quot;&quot;&quot;&#10;                CREATE TABLE IF NOT EXISTS cv (&#10;                    id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                    full_name TEXT NOT NULL,&#10;                    email TEXT,&#10;                    phone TEXT,&#10;                    address TEXT,&#10;                    photo_path TEXT,&#10;                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP&#10;                )&#10;                &quot;&quot;&quot;;&#10;            stmt.execute(createCVTable);&#10;&#10;            String createEducationTable = &quot;&quot;&quot;&#10;                CREATE TABLE IF NOT EXISTS education (&#10;                    id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                    cv_id INTEGER NOT NULL,&#10;                    entry TEXT NOT NULL,&#10;                    FOREIGN KEY (cv_id) REFERENCES cv(id) ON DELETE CASCADE&#10;                )&#10;                &quot;&quot;&quot;;&#10;            stmt.execute(createEducationTable);&#10;&#10;            String createSkillsTable = &quot;&quot;&quot;&#10;                CREATE TABLE IF NOT EXISTS skills (&#10;                    id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                    cv_id INTEGER NOT NULL,&#10;                    skill TEXT NOT NULL,&#10;                    FOREIGN KEY (cv_id) REFERENCES cv(id) ON DELETE CASCADE&#10;                )&#10;                &quot;&quot;&quot;;&#10;            stmt.execute(createSkillsTable);&#10;&#10;            String createExperienceTable = &quot;&quot;&quot;&#10;                CREATE TABLE IF NOT EXISTS experience (&#10;                    id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                    cv_id INTEGER NOT NULL,&#10;                    entry TEXT NOT NULL,&#10;                    FOREIGN KEY (cv_id) REFERENCES cv(id) ON DELETE CASCADE&#10;                )&#10;                &quot;&quot;&quot;;&#10;            stmt.execute(createExperienceTable);&#10;&#10;            String createProjectsTable = &quot;&quot;&quot;&#10;                CREATE TABLE IF NOT EXISTS projects (&#10;                    id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                    cv_id INTEGER NOT NULL,&#10;                    project TEXT NOT NULL,&#10;                    FOREIGN KEY (cv_id) REFERENCES cv(id) ON DELETE CASCADE&#10;                )&#10;                &quot;&quot;&quot;;&#10;            stmt.execute(createProjectsTable);&#10;&#10;        } catch (SQLException e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    public int saveCV(CVModel cv) {&#10;        String insertCV = &quot;INSERT INTO cv (full_name, email, phone, address, photo_path) VALUES (?, ?, ?, ?, ?)&quot;;&#10;        &#10;        try (Connection conn = DriverManager.getConnection(DB_URL)) {&#10;            conn.setAutoCommit(false);&#10;            &#10;            try (PreparedStatement pstmt = conn.prepareStatement(insertCV, Statement.RETURN_GENERATED_KEYS)) {&#10;                pstmt.setString(1, cv.getFullName());&#10;                pstmt.setString(2, cv.getEmail());&#10;                pstmt.setString(3, cv.getPhone());&#10;                pstmt.setString(4, cv.getAddress());&#10;                pstmt.setString(5, cv.getPhotoPath());&#10;                pstmt.executeUpdate();&#10;&#10;                ResultSet rs = pstmt.getGeneratedKeys();&#10;                if (rs.next()) {&#10;                    int cvId = rs.getInt(1);&#10;                    cv.setId(cvId);&#10;                    &#10;                    // Save education entries&#10;                    saveListEntries(conn, cvId, cv.getEducation(), &quot;education&quot;, &quot;entry&quot;);&#10;                    &#10;                    // Save skills&#10;                    saveListEntries(conn, cvId, cv.getSkills(), &quot;skills&quot;, &quot;skill&quot;);&#10;                    &#10;                    // Save experience entries&#10;                    saveListEntries(conn, cvId, cv.getExperience(), &quot;experience&quot;, &quot;entry&quot;);&#10;                    &#10;                    // Save projects&#10;                    saveListEntries(conn, cvId, cv.getProjects(), &quot;projects&quot;, &quot;project&quot;);&#10;                    &#10;                    conn.commit();&#10;                    return cvId;&#10;                }&#10;            } catch (SQLException e) {&#10;                conn.rollback();&#10;                throw e;&#10;            }&#10;        } catch (SQLException e) {&#10;            e.printStackTrace();&#10;        }&#10;        return -1;&#10;    }&#10;&#10;    private void saveListEntries(Connection conn, int cvId, List&lt;String&gt; entries, String tableName, String columnName) throws SQLException {&#10;        if (entries == null || entries.isEmpty()) return;&#10;        &#10;        String sql = &quot;INSERT INTO &quot; + tableName + &quot; (cv_id, &quot; + columnName + &quot;) VALUES (?, ?)&quot;;&#10;        try (PreparedStatement pstmt = conn.prepareStatement(sql)) {&#10;            for (String entry : entries) {&#10;                if (entry != null &amp;&amp; !entry.isBlank()) {&#10;                    pstmt.setInt(1, cvId);&#10;                    pstmt.setString(2, entry);&#10;                    pstmt.executeUpdate();&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    public List&lt;CVModel&gt; getAllCVs() {&#10;        List&lt;CVModel&gt; cvList = new ArrayList&lt;&gt;();&#10;        String query = &quot;SELECT id, full_name, email, phone, address, photo_path FROM cv ORDER BY created_at DESC&quot;;&#10;        &#10;        try (Connection conn = DriverManager.getConnection(DB_URL);&#10;             Statement stmt = conn.createStatement();&#10;             ResultSet rs = stmt.executeQuery(query)) {&#10;            &#10;            while (rs.next()) {&#10;                CVModel cv = new CVModel();&#10;                cv.setId(rs.getInt(&quot;id&quot;));&#10;                cv.setFullName(rs.getString(&quot;full_name&quot;));&#10;                cv.setEmail(rs.getString(&quot;email&quot;));&#10;                cv.setPhone(rs.getString(&quot;phone&quot;));&#10;                cv.setAddress(rs.getString(&quot;address&quot;));&#10;                cv.setPhotoPath(rs.getString(&quot;photo_path&quot;));&#10;                cvList.add(cv);&#10;            }&#10;        } catch (SQLException e) {&#10;            e.printStackTrace();&#10;        }&#10;        &#10;        return cvList;&#10;    }&#10;&#10;    public CVModel getCVById(int id) {&#10;        String query = &quot;SELECT id, full_name, email, phone, address, photo_path FROM cv WHERE id = ?&quot;;&#10;        &#10;        try (Connection conn = DriverManager.getConnection(DB_URL);&#10;             PreparedStatement pstmt = conn.prepareStatement(query)) {&#10;            &#10;            pstmt.setInt(1, id);&#10;            ResultSet rs = pstmt.executeQuery();&#10;            &#10;            if (rs.next()) {&#10;                CVModel cv = new CVModel();&#10;                cv.setId(rs.getInt(&quot;id&quot;));&#10;                cv.setFullName(rs.getString(&quot;full_name&quot;));&#10;                cv.setEmail(rs.getString(&quot;email&quot;));&#10;                cv.setPhone(rs.getString(&quot;phone&quot;));&#10;                cv.setAddress(rs.getString(&quot;address&quot;));&#10;                cv.setPhotoPath(rs.getString(&quot;photo_path&quot;));&#10;                &#10;                // Load education&#10;                cv.getEducation().addAll(loadListEntries(id, &quot;education&quot;, &quot;entry&quot;));&#10;                &#10;                // Load skills&#10;                cv.getSkills().addAll(loadListEntries(id, &quot;skills&quot;, &quot;skill&quot;));&#10;                &#10;                // Load experience&#10;                cv.getExperience().addAll(loadListEntries(id, &quot;experience&quot;, &quot;entry&quot;));&#10;                &#10;                // Load projects&#10;                cv.getProjects().addAll(loadListEntries(id, &quot;projects&quot;, &quot;project&quot;));&#10;                &#10;                return cv;&#10;            }&#10;        } catch (SQLException e) {&#10;            e.printStackTrace();&#10;        }&#10;        &#10;        return null;&#10;    }&#10;&#10;    private List&lt;String&gt; loadListEntries(int cvId, String tableName, String columnName) throws SQLException {&#10;        List&lt;String&gt; entries = new ArrayList&lt;&gt;();&#10;        String query = &quot;SELECT &quot; + columnName + &quot; FROM &quot; + tableName + &quot; WHERE cv_id = ?&quot;;&#10;        &#10;        try (Connection conn = DriverManager.getConnection(DB_URL);&#10;             PreparedStatement pstmt = conn.prepareStatement(query)) {&#10;            &#10;            pstmt.setInt(1, cvId);&#10;            ResultSet rs = pstmt.executeQuery();&#10;            &#10;            while (rs.next()) {&#10;                entries.add(rs.getString(columnName));&#10;            }&#10;        }&#10;        &#10;        return entries;&#10;    }&#10;&#10;    public void deleteCV(int id) {&#10;        String deleteCV = &quot;DELETE FROM cv WHERE id = ?&quot;;&#10;        &#10;        try (Connection conn = DriverManager.getConnection(DB_URL)) {&#10;            // Enable foreign keys to ensure CASCADE works&#10;            try (Statement stmt = conn.createStatement()) {&#10;                stmt.execute(&quot;PRAGMA foreign_keys = ON&quot;);&#10;            }&#10;            &#10;            // CASCADE will automatically delete related records&#10;            try (PreparedStatement pstmt = conn.prepareStatement(deleteCV)) {&#10;                pstmt.setInt(1, id);&#10;                pstmt.executeUpdate();&#10;            }&#10;        } catch (SQLException e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/com/example/_207103_project/ExploreController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/example/_207103_project/ExploreController.java" />
              <option name="originalContent" value="package com.example._207103_project;&#10;&#10;import javafx.event.ActionEvent;&#10;import javafx.fxml.FXML;&#10;import javafx.fxml.FXMLLoader;&#10;import javafx.geometry.Insets;&#10;import javafx.scene.Node;&#10;import javafx.scene.Parent;&#10;import javafx.scene.control.*;&#10;import javafx.scene.layout.HBox;&#10;import javafx.scene.layout.Priority;&#10;import javafx.scene.layout.Region;&#10;import javafx.scene.layout.VBox;&#10;import javafx.stage.Stage;&#10;&#10;import java.util.List;&#10;import java.util.Objects;&#10;import java.util.Optional;&#10;&#10;public class ExploreController {&#10;&#10;    @FXML private VBox cvListContainer;&#10;&#10;    @FXML&#10;    public void initialize() {&#10;        loadSavedCVs();&#10;    }&#10;&#10;    private void loadSavedCVs() {&#10;        cvListContainer.getChildren().clear();&#10;        DatabaseManager dbManager = DatabaseManager.getInstance();&#10;        List&lt;CVModel&gt; cvList = dbManager.getAllCVs();&#10;&#10;        if (cvList.isEmpty()) {&#10;            Label emptyLabel = new Label(&quot;No saved CVs found. Create one first!&quot;);&#10;            emptyLabel.setStyle(&quot;-fx-font-size:16px; -fx-text-fill:#64748b; -fx-padding:20;&quot;);&#10;            cvListContainer.getChildren().add(emptyLabel);&#10;        } else {&#10;            for (CVModel cv : cvList) {&#10;                cvListContainer.getChildren().add(createCVCard(cv));&#10;            }&#10;        }&#10;    }&#10;&#10;    private HBox createCVCard(CVModel cv) {&#10;        HBox card = new HBox(12);&#10;        card.setStyle(&quot;-fx-background-color: white; -fx-background-radius: 8; &quot; +&#10;                      &quot;-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8,0,0,2); &quot; +&#10;                      &quot;-fx-padding: 16;&quot;);&#10;        card.setPrefHeight(Region.USE_COMPUTED_SIZE);&#10;&#10;        VBox infoBox = new VBox(6);&#10;        Label nameLabel = new Label(cv.getFullName());&#10;        nameLabel.setStyle(&quot;-fx-font-size:18px; -fx-font-weight:bold; -fx-text-fill:#0b3a4a;&quot;);&#10;        &#10;        Label emailLabel = new Label(cv.getEmail() != null ? cv.getEmail() : &quot;&quot;);&#10;        emailLabel.setStyle(&quot;-fx-font-size:13px; -fx-text-fill:#64748b;&quot;);&#10;        &#10;        Label phoneLabel = new Label(cv.getPhone() != null ? cv.getPhone() : &quot;&quot;);&#10;        phoneLabel.setStyle(&quot;-fx-font-size:13px; -fx-text-fill:#64748b;&quot;);&#10;        &#10;        infoBox.getChildren().addAll(nameLabel, emailLabel, phoneLabel);&#10;        HBox.setHgrow(infoBox, Priority.ALWAYS);&#10;&#10;        VBox buttonBox = new VBox(8);&#10;        buttonBox.setStyle(&quot;-fx-alignment: center-right;&quot;);&#10;        &#10;        Button viewBtn = new Button(&quot;View&quot;);&#10;        viewBtn.setStyle(&quot;-fx-background-color:#3b82f6; -fx-text-fill:white; &quot; +&#10;                        &quot;-fx-font-weight:bold; -fx-background-radius:6; -fx-padding:6 16 6 16;&quot;);&#10;        viewBtn.setOnAction(e -&gt; viewCV(cv.getId()));&#10;        &#10;        Button deleteBtn = new Button(&quot;Delete&quot;);&#10;        deleteBtn.setStyle(&quot;-fx-background-color:#ef4444; -fx-text-fill:white; &quot; +&#10;                          &quot;-fx-font-weight:bold; -fx-background-radius:6; -fx-padding:6 16 6 16;&quot;);&#10;        deleteBtn.setOnAction(e -&gt; deleteCV(cv.getId()));&#10;        &#10;        buttonBox.getChildren().addAll(viewBtn, deleteBtn);&#10;&#10;        card.getChildren().addAll(infoBox, buttonBox);&#10;        VBox.setMargin(card, new Insets(0, 0, 12, 0));&#10;        &#10;        return card;&#10;    }&#10;&#10;    private void viewCV(int cvId) {&#10;        try {&#10;            DatabaseManager dbManager = DatabaseManager.getInstance();&#10;            CVModel cv = dbManager.getCVById(cvId);&#10;            &#10;            if (cv != null) {&#10;                FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/preview.fxml&quot;));&#10;                Parent root = loader.load();&#10;                PreviewController pc = loader.getController();&#10;                pc.setModel(cv);&#10;                &#10;                Stage stage = (Stage) cvListContainer.getScene().getWindow();&#10;                stage.getScene().setRoot(root);&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;            showError(&quot;Failed to load CV: &quot; + e.getMessage());&#10;        }&#10;    }&#10;&#10;    private void deleteCV(int cvId) {&#10;        Alert confirmAlert = new Alert(Alert.AlertType.CONFIRMATION);&#10;        confirmAlert.setTitle(&quot;Confirm Delete&quot;);&#10;        confirmAlert.setHeaderText(null);&#10;        confirmAlert.setContentText(&quot;Are you sure you want to delete this CV?&quot;);&#10;        &#10;        Optional&lt;ButtonType&gt; result = confirmAlert.showAndWait();&#10;        if (result.isPresent() &amp;&amp; result.get() == ButtonType.OK) {&#10;            try {&#10;                DatabaseManager dbManager = DatabaseManager.getInstance();&#10;                dbManager.deleteCV(cvId);&#10;                &#10;                Alert successAlert = new Alert(Alert.AlertType.INFORMATION);&#10;                successAlert.setTitle(&quot;Success&quot;);&#10;                successAlert.setHeaderText(null);&#10;                successAlert.setContentText(&quot;CV deleted successfully!&quot;);&#10;                successAlert.showAndWait();&#10;                &#10;                loadSavedCVs(); // Refresh the list&#10;            } catch (Exception e) {&#10;                e.printStackTrace();&#10;                showError(&quot;Failed to delete CV: &quot; + e.getMessage());&#10;            }&#10;        }&#10;    }&#10;&#10;    @FXML&#10;    private void backToWelcome(ActionEvent event) {&#10;        try {&#10;            Parent root = FXMLLoader.load(Objects.requireNonNull(getClass().getResource(&quot;/WelcomePage.fxml&quot;)));&#10;            Stage stage = (Stage) ((Node) event.getSource()).getScene().getWindow();&#10;            stage.getScene().setRoot(root);&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;            showError(&quot;Failed to return to welcome page: &quot; + e.getMessage());&#10;        }&#10;    }&#10;&#10;    private void showError(String message) {&#10;        Alert alert = new Alert(Alert.AlertType.ERROR);&#10;        alert.setTitle(&quot;Error&quot;);&#10;        alert.setHeaderText(null);&#10;        alert.setContentText(message);&#10;        alert.showAndWait();&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example._207103_project;&#10;&#10;import javafx.event.ActionEvent;&#10;import javafx.fxml.FXML;&#10;import javafx.fxml.FXMLLoader;&#10;import javafx.geometry.Insets;&#10;import javafx.scene.Node;&#10;import javafx.scene.Parent;&#10;import javafx.scene.control.*;&#10;import javafx.scene.layout.HBox;&#10;import javafx.scene.layout.Priority;&#10;import javafx.scene.layout.Region;&#10;import javafx.scene.layout.VBox;&#10;import javafx.stage.Stage;&#10;&#10;import java.util.List;&#10;import java.util.Objects;&#10;import java.util.Optional;&#10;&#10;public class ExploreController {&#10;&#10;    @FXML private VBox cvListContainer;&#10;&#10;    @FXML&#10;    public void initialize() {&#10;        loadSavedCVs();&#10;    }&#10;&#10;    private void loadSavedCVs() {&#10;        cvListContainer.getChildren().clear();&#10;        DatabaseManager dbManager = DatabaseManager.getInstance();&#10;        List&lt;CVModel&gt; cvList = dbManager.getAllCVs();&#10;&#10;        if (cvList.isEmpty()) {&#10;            Label emptyLabel = new Label(&quot;No saved CVs found. Create one first!&quot;);&#10;            emptyLabel.setStyle(&quot;-fx-font-size:16px; -fx-text-fill:#64748b; -fx-padding:20;&quot;);&#10;            cvListContainer.getChildren().add(emptyLabel);&#10;        } else {&#10;            for (CVModel cv : cvList) {&#10;                cvListContainer.getChildren().add(createCVCard(cv));&#10;            }&#10;        }&#10;    }&#10;&#10;    private HBox createCVCard(CVModel cv) {&#10;        HBox card = new HBox(12);&#10;        card.setStyle(&quot;-fx-background-color: white; -fx-background-radius: 8; &quot; +&#10;                      &quot;-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8,0,0,2); &quot; +&#10;                      &quot;-fx-padding: 16;&quot;);&#10;        card.setPrefHeight(Region.USE_COMPUTED_SIZE);&#10;&#10;        VBox infoBox = new VBox(6);&#10;        Label nameLabel = new Label(cv.getFullName());&#10;        nameLabel.setStyle(&quot;-fx-font-size:18px; -fx-font-weight:bold; -fx-text-fill:#0b3a4a;&quot;);&#10;        &#10;        Label emailLabel = new Label(cv.getEmail() != null ? cv.getEmail() : &quot;&quot;);&#10;        emailLabel.setStyle(&quot;-fx-font-size:13px; -fx-text-fill:#64748b;&quot;);&#10;        &#10;        Label phoneLabel = new Label(cv.getPhone() != null ? cv.getPhone() : &quot;&quot;);&#10;        phoneLabel.setStyle(&quot;-fx-font-size:13px; -fx-text-fill:#64748b;&quot;);&#10;        &#10;        infoBox.getChildren().addAll(nameLabel, emailLabel, phoneLabel);&#10;        HBox.setHgrow(infoBox, Priority.ALWAYS);&#10;&#10;        VBox buttonBox = new VBox(8);&#10;        buttonBox.setStyle(&quot;-fx-alignment: center-right;&quot;);&#10;        &#10;        Button viewBtn = new Button(&quot;View&quot;);&#10;        viewBtn.setStyle(&quot;-fx-background-color:#3b82f6; -fx-text-fill:white; &quot; +&#10;                        &quot;-fx-font-weight:bold; -fx-background-radius:6; -fx-padding:6 16 6 16;&quot;);&#10;        viewBtn.setOnAction(_ -&gt; viewCV(cv.getId()));&#10;        &#10;        Button deleteBtn = new Button(&quot;Delete&quot;);&#10;        deleteBtn.setStyle(&quot;-fx-background-color:#ef4444; -fx-text-fill:white; &quot; +&#10;                          &quot;-fx-font-weight:bold; -fx-background-radius:6; -fx-padding:6 16 6 16;&quot;);&#10;        deleteBtn.setOnAction(_ -&gt; deleteCV(cv.getId()));&#10;        &#10;        buttonBox.getChildren().addAll(viewBtn, deleteBtn);&#10;&#10;        card.getChildren().addAll(infoBox, buttonBox);&#10;        VBox.setMargin(card, new Insets(0, 0, 12, 0));&#10;        &#10;        return card;&#10;    }&#10;&#10;    private void viewCV(int cvId) {&#10;        try {&#10;            DatabaseManager dbManager = DatabaseManager.getInstance();&#10;            CVModel cv = dbManager.getCVById(cvId);&#10;            &#10;            if (cv != null) {&#10;                FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/preview.fxml&quot;));&#10;                Parent root = loader.load();&#10;                PreviewController pc = loader.getController();&#10;                pc.setModel(cv);&#10;                &#10;                Stage stage = (Stage) cvListContainer.getScene().getWindow();&#10;                stage.getScene().setRoot(root);&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;            showError(&quot;Failed to load CV: &quot; + e.getMessage());&#10;        }&#10;    }&#10;&#10;    private void deleteCV(int cvId) {&#10;        Alert confirmAlert = new Alert(Alert.AlertType.CONFIRMATION);&#10;        confirmAlert.setTitle(&quot;Confirm Delete&quot;);&#10;        confirmAlert.setHeaderText(null);&#10;        confirmAlert.setContentText(&quot;Are you sure you want to delete this CV?&quot;);&#10;        &#10;        Optional&lt;ButtonType&gt; result = confirmAlert.showAndWait();&#10;        if (result.isPresent() &amp;&amp; result.get() == ButtonType.OK) {&#10;            try {&#10;                DatabaseManager dbManager = DatabaseManager.getInstance();&#10;                dbManager.deleteCV(cvId);&#10;                &#10;                Alert successAlert = new Alert(Alert.AlertType.INFORMATION);&#10;                successAlert.setTitle(&quot;Success&quot;);&#10;                successAlert.setHeaderText(null);&#10;                successAlert.setContentText(&quot;CV deleted successfully!&quot;);&#10;                successAlert.showAndWait();&#10;                &#10;                loadSavedCVs(); // Refresh the list&#10;            } catch (Exception e) {&#10;                e.printStackTrace();&#10;                showError(&quot;Failed to delete CV: &quot; + e.getMessage());&#10;            }&#10;        }&#10;    }&#10;&#10;    @FXML&#10;    private void backToWelcome(ActionEvent event) {&#10;        try {&#10;            var resource = getClass().getResource(&quot;/WelcomePage.fxml&quot;);&#10;            if (resource == null) {&#10;                showError(&quot;WelcomePage.fxml not found&quot;);&#10;                return;&#10;            }&#10;            Parent root = FXMLLoader.load(resource);&#10;            Stage stage = (Stage) ((Node) event.getSource()).getScene().getWindow();&#10;            stage.getScene().setRoot(root);&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;            showError(&quot;Failed to return to welcome page: &quot; + e.getMessage());&#10;        }&#10;    }&#10;&#10;    private void showError(String message) {&#10;        Alert alert = new Alert(Alert.AlertType.ERROR);&#10;        alert.setTitle(&quot;Error&quot;);&#10;        alert.setHeaderText(null);&#10;        alert.setContentText(message);&#10;        alert.showAndWait();&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>